define(["API/Register"],()=>({viewModel:function(){const RegisterAPI=require("API/Register"),Store=require("Store/Store");let enableButton=!1;this.afterBinding=(()=>{"browser"===cordova.platformId&&(document.getElementById("signInAndroid").style.display="none"),"android"===cordova.platformId&&(document.getElementById("signInBrowser").style.display="none")}),this.phoneNumber=ko.observable(""),this.phoneNumber.subscribe(value=>{isValidPhoneNumber(value)?($(".btn-continue").css({"background-color":"#003780",color:"white"}),enableButton=!0):($(".btn-continue").css({"background-color":"#fff",color:"#000"}),enableButton=!1)}),this.getCode=(()=>{if(enableButton){Store.isShowLoading(!0);let convertedNumber=convertPhoneNumber(this.phoneNumber());console.log(convertedNumber),RegisterAPI.getPhoneCode(convertedNumber).then(res=>{Store.isShowLoading(!1),0==res.code&&app.setPage("LoginConfirm",{phoneNumber:convertedNumber}),console.log(res)}).catch(e=>{Store.isShowLoading(!1),console.log(e)})}});let isValidPhoneNumber=phoneNumber=>10===phoneNumber.length&&/^0/.test(phoneNumber),convertPhoneNumber=phoneNumber=>phoneNumber.replace(/^0/g,"+84")},template:'\n            <div class="login-page">\n    <div class="header-bg">\n        <img src="./img/header_bg.svg">\n    </div>\n    <div class="title">\n        <div class="img-wrapper">\n            <img src="./img/logo.png">\n        </div>\n        HD System\n    </div>\n    <div class="sign-in-wrapper">\n        <div class="w-80">\n            <div class="phone-number">Đăng nhập bằng số điện thoại của bạn</div>\n            <input type="text" id="enter-number" data-bind="textInput: phoneNumber">\n        </div>\n\n        <div class="w-80">\n            <button class="btn-continue" data-bind="event: {tap: getCode}">Tiếp tục</button>\n        </div>\n\n        <div id="signInBrowser" class="g-signin2" data-onsuccess="onSignIn"></div>\n\n        <button id="signInAndroid" onclick="return gpPlusLogin();">Login with Google</button>\n    </div>\n    <div class="footer_img">\n        <img src="./img/footer_bg.svg" />\n    </div>\n</div>\n        '}));