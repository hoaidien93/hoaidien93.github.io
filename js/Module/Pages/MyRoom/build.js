define(["API/Post"],()=>({viewModel:function(){const postAPI=require("API/Post");let page=0,size=1;this.listResult=ko.observableArray([]),this.afterBinding=(e=>{$(window).off("scroll"),$(window).on("scroll",function(){$(".app").height()<=$("html").scrollTop()+$(window).height()+1&&page<size&&getMyRoom()})});let getMyRoom=()=>{postAPI.getMyPost(page++).then(res=>{this.listResult.push(...res.data.hits),size=Math.ceil(res.data.total/10)}).catch(err=>{console.log(err)})};getMyRoom()},template:'\n            <div id="my-room-page">\n    <com-slider></com-slider>\n    <com-headercontext></com-headercontext>\n\n    <div class="body-content">\n        <div class="add-post">\n            <button class="btn-add-post" data-bind="directInfo: {to: \'CreatePost\'}">Thêm bài đăng</button>\n        </div>\n        <h3 class="header-title">Bài đăng của tôi</h3>\n        <div class="search-result" data-bind="foreach: listResult">\n            <div class="search-item" data-bind="directInfo: {to: \'MyPostDetail\', data: $data}">\n                <div class="image-wrapper">\n                    <img data-bind="attr: {src: image ? image: \'./img/example.jpg\'}">\n                </div>\n                <div class="content-wrapper">\n                    <div class="content-title" data-bind="text: title"></div>\n                    <div class="content-bottom">\n                        <div class="content-price" data-bind="convertMoney: price"></div>\n                        <div class="content-description">\n                            <span data-bind="convertTime: created_at"></span>\n                            <span data-bind="text: location" class="location"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n        '}));